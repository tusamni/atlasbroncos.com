---
import BaseLayout from "@/layouts/BaseLayout";
import Button from "@/components/buttons/Button";
import Container from "@/components/layout/Container";
import HorizontalRule from "@/components/sections/HorizontalRule";
import Image from "@/components/images/Image";
import LargeHeading from "@/components/sections/text/LargeHeading";
import Padding from "@/components/layout/Padding";
import Paragraph from "@/components/sections/text/Paragraph";
import Section from "@/components/layout/Section";
import HeadingBase from "@/components/sections/HeadingBase";
import LargeFeature from "@/components/sections/LargeFeature";

const images = [
	{
		url: "https://cdn.cosmicjs.com/d3693af0-4c7c-11f0-8d02-d7de9448d6b1-R5C_7278.jpg",
		name: "John Smith",
		position: "CEO"
	},
	{
		url: "https://cdn.cosmicjs.com/d304d3d0-4c7c-11f0-8d02-d7de9448d6b1-R5C_7327.jpg",
		name: "John Smith",
		position: "CEO"
	},
	{
		url: "https://cdn.cosmicjs.com/ef2720e0-4c7c-11f0-8d02-d7de9448d6b1-R5C_7244.jpg",
		name: "John Smith",
		position: "CEO"
	},
	{
		url: "https://cdn.cosmicjs.com/f1a23300-4c7c-11f0-8d02-d7de9448d6b1-R5C_7381.jpg",
		name: "John Smith",
		position: "CEO"
	},
	{
		url: "https://cdn.cosmicjs.com/f25ef350-4c7c-11f0-8d02-d7de9448d6b1-R5C_7310.jpg",
		name: "John Smith",
		position: "CEO"
	},
];
const team = [
	{
		title: "Experience",
		content: "Our team collectively boasts over 180 years of experience in automotive restoration excellence.",
	},
	{
		title: "Heritage",
		content: "Having restored thousands of classic vehicles, we are proud of our rich history in the industry.",
	},
	{
		title: "Awards",
		content: "We've been recognized for our work on Ford retractables, earning several prestigious awards.",
	},
	{
		title: "Transition",
		content: "In 2020, we shifted our focus to Vintage Broncos, bringing our passion and expertise to the restoration of these iconic vehicles.",
	},
];
---

<BaseLayout bgColor="bg-stone-100" marginTop={false} marginBottom={false}>
	<Padding>
		<Section>
			<Container>
				<HeadingBase>
					<h1 class="text-white md:w-3/4 text-balanced">With decades of experience, we've built and restored thousands of vehicles.</h1>
				</HeadingBase>
			</Container>

			<div class="overflow-hidden">
				<Container>
					<div class="mx-auto">
						<div class="embla !overflow-visible">
							<div class="embla__viewport">
								<div class="embla__container flex gap-8">
									{
										images.map((i) => (
											<div class="embla__slide text-center basis-md grow-0 shrink-0 h-full">
												<Image src={i.url} pictureClass="w-full h-full" class="w-full h-full object-cover" rounded={true} sizes="(min-width: 768px) 90vw, (min-width: 1280px) 1050px, 100vw" lazy={false} />
												<div class="flex flex-col mt-2">
													<div class="font-semibold text-sm">{i.name}</div>
													<div class=" text-sm">{i.position}</div>
												</div>
											</div>
											
										))
									}
								</div>
							</div>
						</div>
		
						<div class="embla__controls flex justify-center items-center mt-8">		
							<div class="embla__buttons flex items-center gap-2">
								<button class="embla__button embla__button--prev group bg-stone-200 hover:bg-stone-50 transition-all flex items-center justify-center rounded-xl aspect-square h-auto w-8 hover:cursor-pointer">
									<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="embla__button__svg size-5">
										<path fill-rule="evenodd" d="M11.78 5.22a.75.75 0 0 1 0 1.06L8.06 10l3.72 3.72a.75.75 0 1 1-1.06 1.06l-4.25-4.25a.75.75 0 0 1 0-1.06l4.25-4.25a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd"></path>
									</svg>
								</button>
		
								<button class="embla__button embla__button--next group bg-stone-200 hover:bg-stone-50 transition-all flex items-center justify-center rounded-xl aspect-square h-auto w-8 hover:cursor-pointer">
									<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="embla__button__svg size-5">
										<path fill-rule="evenodd" d="M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd"></path>
									</svg>
								</button>
							</div>
						</div>
					</div>
				</Container>
			</div>

			<Container>
				<div>
					<div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-12">
						<h3 class="sm:text-balance">Originally, our focus was on Ford retractables, and our team has <span>won numerous awards</span> for excellence in this area.</h3>
	
						<div class="space-y-8">
							<Paragraph classes="text-stone-900 text-lg md:text-xl">In 2020, we decided to channel our skills and passion into restoring Vintage Broncos, giving these classics the attention they deserve. Every restoration is a labor of love, and our reputation for quality has followed us into this new chapter of our business.</Paragraph>
						</div>
					</div>
				</div>
	
				<div class="mt-32 space-y-12">
					<HorizontalRule />
	
					<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-12">
						{
							team.map((t) => (
								<LargeFeature>
									<div slot="heading">{t.title}</div>
									<div slot="description">{t.content}</div>
								</LargeFeature>
							))
						}
					</div>
	
					<HorizontalRule />
				</div>
			</Container>
		</Section>
	</Padding>
</BaseLayout>

<script>
	// swiper
	import EmblaCarousel from "embla-carousel";

	const addTogglePrevNextBtnsActive = (emblaApi, prevBtn, nextBtn) => {
		const togglePrevNextBtnsState = () => {
			if (emblaApi.canScrollPrev()) prevBtn.removeAttribute('disabled')
				else prevBtn.setAttribute('disabled', 'disabled')

			if (emblaApi.canScrollNext()) nextBtn.removeAttribute('disabled')
				else nextBtn.setAttribute('disabled', 'disabled')
		}

		emblaApi
			.on('select', togglePrevNextBtnsState)
			.on('init', togglePrevNextBtnsState)
			.on('reInit', togglePrevNextBtnsState)

		return () => {
			prevBtn.removeAttribute('disabled')
			nextBtn.removeAttribute('disabled')
		}
	}

	export const addPrevNextBtnsClickHandlers = (emblaApi, prevBtn, nextBtn) => {
		const scrollPrev = () => {
			emblaApi.scrollPrev()
		}
		const scrollNext = () => {
			emblaApi.scrollNext()
		}
		prevBtn.addEventListener('click', scrollPrev, false)
		nextBtn.addEventListener('click', scrollNext, false)

		const removeTogglePrevNextBtnsActive = addTogglePrevNextBtnsActive(
			emblaApi,
			prevBtn,
			nextBtn
		)

		return () => {
			removeTogglePrevNextBtnsActive()
			prevBtn.removeEventListener('click', scrollPrev, false)
			nextBtn.removeEventListener('click', scrollNext, false)
		}
	}

	const options = {
		loop: false
	}

	const emblaNode = document.querySelector(".embla");
	const viewportNode = document.querySelector(".embla__viewport");
	const prevBtnNode = document.querySelector('.embla__button--prev')
	const nextBtnNode = document.querySelector('.embla__button--next')

	const emblaApi = EmblaCarousel(viewportNode, options);

	const removePrevNextBtnsClickHandlers = addPrevNextBtnsClickHandlers(
		emblaApi,
		prevBtnNode,
		nextBtnNode
	)

	emblaApi.on('destroy', removePrevNextBtnsClickHandlers)
	emblaApi.on('destroy', removeDotBtnsAndClickHandlers)

	
</script>
